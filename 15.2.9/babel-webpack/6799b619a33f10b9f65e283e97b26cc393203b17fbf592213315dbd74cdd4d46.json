{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport class AppStateService {\n  constructor() {\n    this.initialState = {\n      externalPosts: [],\n      localPosts: []\n    };\n    this.stateSubject = new BehaviorSubject(this.initialState);\n    this.state$ = this.stateSubject.asObservable();\n  }\n  setPosts(posts) {\n    const externalPosts = posts.filter(post => post.hasOwnProperty('userId'));\n    const localPosts = posts.filter(post => !post.hasOwnProperty('userId'));\n    this.stateSubject.next({\n      externalPosts,\n      localPosts\n    });\n  }\n  addExternalPost(post) {\n    const currentState = this.stateSubject.getValue();\n    const updatedPosts = [...currentState.externalPosts, post];\n    this.stateSubject.next({\n      ...currentState,\n      externalPosts: updatedPosts\n    });\n  }\n  addLocalPost(post) {\n    const currentState = this.stateSubject.getValue();\n    const updatedPosts = [...currentState.localPosts, post];\n    this.stateSubject.next({\n      ...currentState,\n      localPosts: updatedPosts\n    });\n  }\n  updateExternalPost(post) {\n    const currentState = this.stateSubject.getValue();\n    const updatedPosts = currentState.externalPosts.map(p => p.id !== post.id ? post : p);\n    this.stateSubject.next({\n      ...currentState,\n      externalPosts: updatedPosts\n    });\n  }\n  updateLocalPost(post) {\n    const currentState = this.stateSubject.getValue();\n    const updatedPosts = currentState.localPosts.map(p => p.id !== post.id ? post : p);\n    this.stateSubject.next({\n      ...currentState,\n      localPosts: updatedPosts\n    });\n  }\n  deleteExternalPost(postId) {\n    const currentState = this.stateSubject.getValue();\n    const updatedPosts = currentState.externalPosts.filter(p => p.id !== postId);\n    this.stateSubject.next({\n      ...currentState,\n      externalPosts: updatedPosts\n    });\n  }\n  deleteLocalPost(postId) {\n    const currentState = this.stateSubject.getValue();\n    const updatedPosts = currentState.localPosts.filter(p => p.id !== postId);\n    this.stateSubject.next({\n      ...currentState,\n      localPosts: updatedPosts\n    });\n  }\n}\nAppStateService.ɵfac = function AppStateService_Factory(t) {\n  return new (t || AppStateService)();\n};\nAppStateService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AppStateService,\n  factory: AppStateService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["BehaviorSubject","AppStateService","constructor","externalPosts","localPosts","initialState","stateSubject","asObservable","setPosts","posts","filter","post","hasOwnProperty","next","addExternalPost","currentState","getValue","updatedPosts","addLocalPost","updateExternalPost","map","p","id","updateLocalPost","deleteExternalPost","postId","deleteLocalPost","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\ahmzy_5ce8ywd\\OneDrive\\Documents\\volvo\\Angular-main\\Angular-main\\recruitment-task-main - Senior\\recruitment-task-main\\src\\app\\app-state.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\ninterface State {\n  externalPosts: any[];\n  localPosts: any[];\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AppStateService {\n  private initialState: State = {\n    externalPosts: [],\n    localPosts: []\n    \n  };\n\n  private stateSubject: BehaviorSubject<State> = new BehaviorSubject<State>(this.initialState);\n  state$: Observable<State> = this.stateSubject.asObservable();\n\n  constructor() {}\n\n  setPosts(posts: any[]): void {\n    const externalPosts = posts.filter(post => post.hasOwnProperty('userId'));\n    const localPosts = posts.filter(post => !post.hasOwnProperty('userId'));\n\n    this.stateSubject.next({ externalPosts, localPosts });\n  }\n\n  addExternalPost(post: any): void {\n    const currentState = this.stateSubject.getValue();\n    const updatedPosts = [...currentState.externalPosts, post];\n    this.stateSubject.next({ ...currentState, externalPosts: updatedPosts });\n  }\n\n  addLocalPost(post: any): void {\n    const currentState = this.stateSubject.getValue();\n    const updatedPosts = [...currentState.localPosts, post];\n    this.stateSubject.next({ ...currentState, localPosts: updatedPosts });\n  }\n\n  updateExternalPost(post: any): void {\n    const currentState = this.stateSubject.getValue();\n    const updatedPosts = currentState.externalPosts.map(p => (p.id !== post.id ? post : p));\n    this.stateSubject.next({ ...currentState, externalPosts: updatedPosts });\n  }\n\n  updateLocalPost(post: any): void {\n    const currentState = this.stateSubject.getValue();\n    const updatedPosts = currentState.localPosts.map(p => (p.id !== post.id ? post : p));\n    this.stateSubject.next({ ...currentState, localPosts: updatedPosts });\n  }\n\n  deleteExternalPost(postId: number): void {\n    const currentState = this.stateSubject.getValue();\n    const updatedPosts = currentState.externalPosts.filter(p => p.id !== postId);\n    this.stateSubject.next({ ...currentState, externalPosts: updatedPosts });\n  }\n\n  deleteLocalPost(postId: number): void {\n    const currentState = this.stateSubject.getValue();\n    const updatedPosts = currentState.localPosts.filter(p => p.id !== postId);\n    this.stateSubject.next({ ...currentState, localPosts: updatedPosts });\n  }\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}